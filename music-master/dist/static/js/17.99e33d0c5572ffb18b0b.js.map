{"version":3,"sources":["webpack:///./src/3d/006-wave/Common.js","webpack:///src/3d/006-wave/wave.vue","webpack:///./src/3d/006-wave/wave.vue?01a2","webpack:///./src/3d/006-wave/wave.vue","webpack:///./src/3d/THREEJS/LMThree.js","webpack:///./node_modules/babel-runtime/core-js/object/get-own-property-descriptor.js","webpack:///./node_modules/core-js/library/modules/es6.object.get-prototype-of.js","webpack:///./node_modules/babel-runtime/core-js/object/create.js","webpack:///./node_modules/babel-runtime/helpers/inherits.js","webpack:///./node_modules/core-js/library/modules/_set-proto.js","webpack:///./node_modules/babel-runtime/core-js/object/get-prototype-of.js","webpack:///./node_modules/core-js/library/fn/object/get-own-property-descriptor.js","webpack:///./node_modules/core-js/library/modules/es6.object.set-prototype-of.js","webpack:///./node_modules/core-js/library/fn/object/get-prototype-of.js","webpack:///./node_modules/core-js/library/fn/object/set-prototype-of.js","webpack:///./node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js","webpack:///./node_modules/babel-runtime/core-js/object/set-prototype-of.js","webpack:///./node_modules/core-js/library/fn/object/create.js","webpack:///./node_modules/core-js/library/modules/es6.object.create.js","webpack:///./node_modules/core-js/library/modules/_object-sap.js","webpack:///./node_modules/babel-runtime/helpers/get.js","webpack:///./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"],"names":["_06_wave_Common","window","TweenMax","Common","classCallCheck_default","this","_this","possibleConstructorReturn_default","__proto__","get_prototype_of_default","call","object","backgroundColor","ambientLightColor","spotLightColor","boxColor","box","size","height","gridSize","col","row","boxes","angle","amplitude","waveLength","camera","THREE","PerspectiveCamera","innerWidth","innerHeight","position","set","rotation","name","setObject","value","axesHelper","AxesHelper","scene","add","get_default","prototype","background","Color","light","AmbientLight","spotLight","SpotLight","castShadow","distance","geometry","BoxGeometry","material","MeshPhysicalMaterial","color","emissive","roughness","metalness","reflectivity","i","j","Mesh","receiveShadow","y","boxGroup","Group","scale","console","log","degree","tempPosX","x","tempPosZ","z","offset","map","Math","sin","x1","y1","x2","y2","sqrt","pow","start1","stop1","start2","stop2","addBoxes","helper","control","enabled","LMThree","lmthree","wave","data","showOffline","MusicVisual","lmaudio","mode","mounted","init","renderOption","canvasFatherId","registAnimationFrame","loop","destroyed","stopAnimationFrame","uninstall","methods","rendering","subject","playing","getAverageFrequency","drawWave","fileImport","file","document","getElementById","files","loadAudioLocal","_06_wave_wave","render","_h","$createElement","_c","_self","staticClass","attrs","type","id","on","change","_e","_v","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","that","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_classCallCheck___default","loader","w","h","Scene","lookAt","Vector3","WebGLRenderer","alpha","antialias","shadowMap","PCFSoftShadowMap","setSize","appendChild","domElement","setPixelRatio","devicePixelRatio","OrbitControls","autoRotate","update","options","sceneOption","cameraOption","initScene","initRender","initCamera","initLight","initControl","initObjects","addEventListener","onWindowResize","sceneObjs","children","length","remove","_ref","arguments","undefined","_ref$path","path","_ref$name","ObjectLoader","setPath","load","json","e","error","module","exports","default","__esModule","toObject","$getPrototypeOf","it","_setPrototypeOf2","_interopRequireDefault","_create2","_typeof3","obj","subClass","superClass","TypeError","constructor","enumerable","writable","configurable","isObject","anObject","check","O","proto","Object","setPrototypeOf","test","buggy","Function","f","Array","$Object","key","getOwnPropertyDescriptor","$export","S","getPrototypeOf","toIObject","$getOwnPropertyDescriptor","P","D","create","core","fails","KEY","exec","fn","exp","F","_getPrototypeOf2","_getOwnPropertyDescriptor2","get","property","receiver","desc","parent","getter","_typeof2","self","ReferenceError"],"mappings":"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","file":"static/js/17.99e33d0c5572ffb18b0b.js","sourcesContent":["import LMThree from '3d/THREEJS/LMThree'\r\nlet TweenMax = window.TweenMax\r\n\r\nclass Common extends LMThree{\r\n  constructor(){\r\n    super()\r\n    this.object = {}\r\n    this.backgroundColor = 0xcccccc;\r\n    this.ambientLightColor = 0xffffff;\r\n    this.spotLightColor = 0xffffff;\r\n    this.boxColor = 0x1a63ed;\r\n    this.box = {\r\n      size: 1,\r\n      height: 5,\r\n    }\r\n    this.gridSize = 20; // box数量= this.gridSize * this.gridSize\r\n    this.col = this.gridSize\r\n    this.row = this.gridSize;\r\n    this.boxes = [];\r\n\r\n    this.angle = 0;\r\n    this.amplitude = -0.8; // 振幅\r\n    this.waveLength = 200;\r\n  }\r\n\r\n  initCamera() {\r\n    var camera = new THREE.PerspectiveCamera(30, window.innerWidth / window.innerHeight,1, 1000)\r\n    camera.position.set(49, 155, -77);\r\n    camera.rotation.set(-2, 0, 2.5)\r\n    camera.name = 'camera'\r\n\r\n    this.setObject({name: 'camera', value: camera})\r\n  }\r\n  helper() {\r\n    // 坐标轴\r\n    var axesHelper = new THREE.AxesHelper(20);\r\n    this.scene.add( axesHelper );\r\n  }\r\n  initScene() {\r\n    super.initScene()\r\n    this.scene.background = new THREE.Color(this.backgroundColor);\r\n  }\r\n  initLight() {\r\n    const light = new THREE.AmbientLight(this.ambientLightColor, 1.5);\r\n    this.scene.add(light);\r\n    light.name=\"light\"\r\n    this.scene.add(light)\r\n\r\n    const spotLight = new THREE.SpotLight(this.spotLightColor, 1.8);\r\n    spotLight.position.set(100, 69, 50);\r\n    spotLight.castShadow = false; // 关闭灯光投掷阴影,在 iphone 6s plus 上阴影模糊,效果不好。\r\n    spotLight.name = 'spotLight'\r\n    spotLight.distance = 1000;\r\n    this.scene.add(spotLight);\r\n  }\r\n\r\n  addBoxes(scene) {\r\n    const size = this.box.size;\r\n    const height = this.box.height;\r\n    const geometry = new THREE.BoxGeometry(size, height, size);\r\n    const material = new THREE.MeshPhysicalMaterial({\r\n      color: this.boxColor,\r\n      emissive: 0x0, // 材质的自发光颜色\r\n      roughness: 1, // 粗糙程度\r\n      metalness: .1, // 金属性贴图\r\n      reflectivity: .5 // 反射度\r\n    });\r\n    \r\n    // col = row = 50\r\n    for (let i = 0; i < this.col; i+=size) {\r\n      this.boxes[i] = [];\r\n      for (let j = 0; j < this.row; j+=size) {\r\n        const box = new THREE.Mesh( geometry, material );\r\n        box.castShadow = false;\r\n        box.receiveShadow = false;    \r\n        box.position.y = height/2;\r\n        let boxGroup =  new THREE.Group();\r\n        boxGroup.add(box);\r\n        boxGroup.scale.set(1, 0.001, 1);\r\n        this.boxes[i][j] = boxGroup;\r\n        boxGroup.position.set(i - this.gridSize * .5, 0, j - this.gridSize * .5);\r\n        scene.add(boxGroup);\r\n      }\r\n    }\r\n    console.log(this.boxes);\r\n  }\r\n\r\n  drawWave(degree) {\r\n    let size = this.box.size;\r\n    for (let i = 0; i < this.col; i+=size) {\r\n      for (let j = 0; j < this.row; j+=size) {\r\n        let tempPosX = this.boxes[i][j].position.x\r\n        let tempPosZ = this.boxes[i][j].position.z\r\n        const distance = this.distance(tempPosX, tempPosZ, 0, 0);\r\n        const offset = this.map(distance, 0, this.waveLength, 0, 50);\r\n        const angle = this.angle + offset;\r\n        this.boxes[i][j].scale.y = this.map(Math.sin(angle),-1,1,0.1,1);\r\n      }\r\n    }\r\n    this.angle += degree/400\r\n  }\r\n\r\n  distance(x1, y1, x2, y2) {\r\n    return Math.sqrt(Math.pow((x1 - x2), 2) + Math.pow((y1 - y2), 2));\r\n  }\r\n\r\n  // 将(start1~stop1)区域映射到(start2~stop2)\r\n  map(value, start1, stop1, start2, stop2) {\r\n    return (value - start1) / (stop1 - start1) * (stop2 - start2) + start2\r\n  }\r\n\r\n  initObjects() {\r\n    this.addBoxes(this.scene);\r\n    this.helper();\r\n  }\r\n  initControl() {\r\n    super.initControl()\r\n    this.control.enabled = true\r\n  }\r\n}\r\nexport default new Common()\n\n\n// WEBPACK FOOTER //\n// ./src/3d/006-wave/Common.js","<template>\r\n     <div>\r\n        <input v-if=\"showOffline\" class=\"localFile\" type=\"file\" id=\"files\" @change=\"fileImport\" />\r\n        <div id=\"canvasFather\"></div>\r\n     </div>\r\n</template>\r\n\r\n<script>\r\nimport musicVisual from '3d/MusicVisual'\r\nimport common from './Common'\r\nwindow.lmthree = common\r\n\r\nlet that = null\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      showOffline: musicVisual.lmaudio.mode === 'dev' // 离线开发\r\n    }\r\n  },\r\n  mounted() {\r\n    that = this\r\n    let options = {\r\n      renderOption: {\r\n        canvasFatherId: 'canvasFather'\r\n      }\r\n    }\r\n    common.init(options)\r\n    musicVisual.registAnimationFrame(this.loop,'wave')\r\n  },\r\n  destroyed() {\r\n    musicVisual.stopAnimationFrame()\r\n    common.uninstall()\r\n  },\r\n  methods: {\r\n    loop() {\r\n      common.rendering()\r\n      if(musicVisual.lmaudio.subject.playing) {\r\n        let degree = musicVisual.lmaudio.getAverageFrequency()\r\n        common.drawWave(degree)\r\n      }\r\n    },\r\n    fileImport() {\r\n        var file = document.getElementById('files').files[0];\r\n        musicVisual.lmaudio.loadAudioLocal(file);\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#canvasFather {\r\n  background-color: #000;\r\n      background-image: radial-gradient(ellipse farthest-corner at center top, #003466 0%, #000000 80%);\r\n}\r\n\r\n.localFile {\r\n  position: absolute;\r\n  top: 10%;\r\n}\r\n\r\n.download {\r\n  position: absolute;\r\n  top: 10%;\r\n  right: 5%;\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/3d/006-wave/wave.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.showOffline)?_c('input',{staticClass:\"localFile\",attrs:{\"type\":\"file\",\"id\":\"files\"},on:{\"change\":_vm.fileImport}}):_vm._e(),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"canvasFather\"}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3b84d038\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/3d/006-wave/wave.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3b84d038\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./wave.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./wave.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./wave.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3b84d038\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./wave.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/3d/006-wave/wave.vue\n// module id = null\n// module chunks = ","let THREE = window.THREE\r\nlet that = null\r\nclass LMThree {\r\n  constructor() {\r\n    // 场景\r\n    this.scene = null\r\n    // 相机\r\n    this.camera = null\r\n    // 渲染器\r\n    this.render = null\r\n    // 控制器\r\n    this.control = null\r\n    // 模型加载器\r\n    this.loader = null\r\n    this.canvasFatherId = ''\r\n    this.size = {\r\n      w: 0,\r\n      h: 0,\r\n    }\r\n    that = this\r\n  }\r\n\r\n  initScene() {\r\n    this.scene = new THREE.Scene()\r\n    this.scene.name = 'scene'\r\n  }\r\n\r\n  initCamera() {\r\n    this.camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);\r\n    this.size.w = window.innerWidth;\r\n    this.size.h = window.innerHeight;\r\n    this.camera.name=\"2camera\"\r\n    this.camera.lookAt(new THREE.Vector3(0, 0, 0));\r\n  }\r\n\r\n  initLight() {\r\n  }\r\n\r\n  initRender(canvasFatherId) {\r\n    this.canvasFatherId = canvasFatherId\r\n    this.render = new THREE.WebGLRenderer({ alpha: true, antialias: true })\r\n    this.render.shadowMap.enabled = true;\r\n    this.render.shadowMap.type = THREE.PCFSoftShadowMap;\r\n    this.render.setSize(this.size.w, this.size.h);\r\n    let container = document.getElementById(canvasFatherId)\r\n    container.appendChild(this.render.domElement)\r\n    this.render.setPixelRatio( window.devicePixelRatio )\r\n  }\r\n\r\n  initControl() {\r\n    this.control = new THREE.OrbitControls(this.camera, this.render.domElement)\r\n    this.control.autoRotate = false;\r\n    this.control.enabled = true;\r\n  }\r\n\r\n  initObjects() {}\r\n\r\n  setObject(object) {\r\n    switch(object.name) {\r\n      case 'camera':\r\n        this.camera = object.value\r\n        break\r\n    }\r\n  }\r\n\r\n  rendering() {\r\n    this.render.render(this.scene, this.camera)\r\n    this.control.update()\r\n  }\r\n\r\n  // 模板方法,子类实现后调用\r\n  init(options) {\r\n    let {sceneOption, renderOption, cameraOption} = options\r\n    this.initScene()\r\n    this.initRender(renderOption.canvasFatherId)\r\n    this.initCamera()\r\n    this.initLight()\r\n    this.initControl()\r\n    this.initObjects()\r\n    // 开发工具使用\r\n    window.camera = this.camera\r\n    window.scene = this.scene\r\n\r\n    window.addEventListener('resize', this.onWindowResize, false);\r\n  }\r\n\r\n  onWindowResize() {\r\n    that.render.setSize(that.size.w, that.size.h);\r\n  }\r\n  uninstall() {\r\n    // 卸载场景中所有内容\r\n    let sceneObjs = this.scene.children\r\n    for(let i = 0; i < sceneObjs.length; i++) {\r\n      this.scene.remove(sceneObjs[i])\r\n    }\r\n  }\r\n\r\n  load({path='./static/models/', name='model.json'}={}) {\r\n    this.loader = new THREE.ObjectLoader()\r\n    this.loader.setPath(path);\r\n    this.loader.load(name, (json)=>{\r\n      this.scene.add(json);\r\n    }, undefined, (e)=>{\r\n      console.error( e );\r\n    } );\r\n  }\r\n}\r\n\r\nexport default LMThree\n\n\n// WEBPACK FOOTER //\n// ./src/3d/THREEJS/LMThree.js","module.exports = { \"default\": require(\"core-js/library/fn/object/get-own-property-descriptor\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/get-own-property-descriptor.js\n// module id = K6ED\n// module chunks = 1 14 15 16 17 18","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = require('./_to-object');\nvar $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.get-prototype-of.js\n// module id = Kh5d\n// module chunks = 1 14 15 16 17 18","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/create.js\n// module id = OvRC\n// module chunks = 1 14 15 16 17 18","\"use strict\";\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = require(\"../core-js/object/set-prototype-of\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = require(\"../core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/inherits.js\n// module id = Pf15\n// module chunks = 1 14 15 16 17 18","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_set-proto.js\n// module id = ZaQb\n// module chunks = 1 14 15 16 17 18","module.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/get-prototype-of.js\n// module id = Zx67\n// module chunks = 1 14 15 16 17 18","require('../../modules/es6.object.get-own-property-descriptor');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function getOwnPropertyDescriptor(it, key) {\n  return $Object.getOwnPropertyDescriptor(it, key);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/get-own-property-descriptor.js\n// module id = cnlX\n// module chunks = 1 14 15 16 17 18","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', { setPrototypeOf: require('./_set-proto').set });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.set-prototype-of.js\n// module id = exh5\n// module chunks = 1 14 15 16 17 18","require('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/_core').Object.getPrototypeOf;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/get-prototype-of.js\n// module id = fS6E\n// module chunks = 1 14 15 16 17 18","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/set-prototype-of.js\n// module id = i/C/\n// module chunks = 1 14 15 16 17 18","// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\nvar toIObject = require('./_to-iobject');\nvar $getOwnPropertyDescriptor = require('./_object-gopd').f;\n\nrequire('./_object-sap')('getOwnPropertyDescriptor', function () {\n  return function getOwnPropertyDescriptor(it, key) {\n    return $getOwnPropertyDescriptor(toIObject(it), key);\n  };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js\n// module id = iInB\n// module chunks = 1 14 15 16 17 18","module.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/object/set-prototype-of.js\n// module id = kiBT\n// module chunks = 1 14 15 16 17 18","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/object/create.js\n// module id = oM7Q\n// module chunks = 1 14 15 16 17 18","var $export = require('./_export');\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: require('./_object-create') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.object.create.js\n// module id = sF+V\n// module chunks = 1 14 15 16 17 18","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-sap.js\n// module id = uqUo\n// module chunks = 1 14 15 16 17 18","\"use strict\";\n\nexports.__esModule = true;\n\nvar _getPrototypeOf = require(\"../core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _getOwnPropertyDescriptor = require(\"../core-js/object/get-own-property-descriptor\");\n\nvar _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = (0, _getOwnPropertyDescriptor2.default)(object, property);\n\n  if (desc === undefined) {\n    var parent = (0, _getPrototypeOf2.default)(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/get.js\n// module id = yEsh\n// module chunks = 1 14 15 16 17 18","\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/helpers/possibleConstructorReturn.js\n// module id = zwoO\n// module chunks = 1 14 15 16 17 18"],"sourceRoot":""}