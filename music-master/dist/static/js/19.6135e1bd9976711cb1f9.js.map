{"version":3,"sources":["webpack:///./src/3d/003-light/Splots.js","webpack:///src/3d/003-light/light.vue","webpack:///./src/3d/003-light/light.vue?de63","webpack:///./src/3d/003-light/light.vue"],"names":["that","Splots","canvasId","classCallCheck_default","this","canvas","document","getElementById","$","getContext","w","width","window","innerWidth","h","height","innerHeight","_w","_h","arr","cnt","clearRect","i","length","splot","fillStyle","rndCol","beginPath","arc","x","y","r","Math","PI","shadowBlur","shadowOffsetX","shadowOffsetY","shadowColor","globalCompositeOperation","fill","spX","spY","splice","count","addCount","rng","push","number","parse_int_default","draw","disappear","floor","random","min","max","splots","light","data","mounted","_03_light_Splots","MusicVisual","registAnimationFrame","loop","methods","lmaudio","subject","playing","numbers","getAverageFrequency","anim","_03_light_light","render","$createElement","_self","_c","_m","staticRenderFns","attrs","id","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/19.6135e1bd9976711cb1f9.js","sourcesContent":["// 参考自: https://codepen.io/tmrDevelops/pen/rVNxVQ\nlet that = null\nclass Splots {\n  constructor(canvasId) {\n    that = this\n    let canvas = document.getElementById(canvasId)\n    this.$ = canvas.getContext('2d');\n    this.w = canvas.width = window.innerWidth;\n    this.h = canvas.height = window.innerHeight;\n    this._w = this.w * 0.5;\n    this._h = this.h * 0.5;\n    this.arr = [];\n    this.cnt = 0;\n  }\n\n  disappear() {\n    that.$.clearRect(0, 0, that.w, that.h);\n    for (var i = 0; i < that.arr.length; i++) {\n      let splot = that.arr[i];;\n      that.$.fillStyle = that.rndCol();\n      that.$.beginPath();\n      that.$.arc(splot.x, splot.y, splot.r, 0, Math.PI * 2, true);\n      that.$.shadowBlur = 80;\n      that.$.shadowOffsetX = 2;\n      that.$.shadowOffsetY = 2;\n      that.$.shadowColor = that.rndCol();\n      that.$.globalCompositeOperation = 'lighter';\n      that.$.fill();\n  \n      // 将该点移动同时半径减小\n      splot.x = splot.x + splot.spX;\n      splot.y = splot.y + splot.spY;\n      splot.r = splot.r * 0.96;\n      \n      if(splot.r < 5) {\n        that.arr.splice(splot)\n      }\n    }\n  }\n  draw(count) {\n    let addCount = count - that.arr.length\n    for(let i = 0; i < addCount; i++) {\n      let splot = {\n        x: that.rng(that._w - 900, that._w + 900),\n        y: that.rng(that._h - 900, that._h + 900),\n        r: that.rng(20, 80),\n        spX: that.rng(-1, 1),\n        spY: that.rng(-1, 1)\n      };\n      that.arr.push(splot);\n    }\n  }\n\n  anim(number) {\n    that.cnt = Number.parseInt(number)\n    that.draw(that.cnt)\n    that.disappear()\n  }\n  \n  rndCol() {\n    var r = Math.floor(Math.random() * 180);\n    var g = Math.floor(Math.random() * 60);\n    var b = Math.floor(Math.random() * 100);\n    return \"rgb(\" + r + \",\" + g + \",\" + b + \")\";\n  }\n  \n  rng(min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n  }\n}\nexport default Splots\n\n\n\n// WEBPACK FOOTER //\n// ./src/3d/003-light/Splots.js","<template>\n  <div>\n    <canvas id=\"canvas\"></canvas>\n  </div>\n</template>\n\n<script>\nimport musicVisual from '3d/MusicVisual'\nimport Splots from './Splots'\n\nlet that = null\nlet splots = null\n\nexport default {\n  data() {\n    return {\n      splots\n    }\n  },\n  mounted() {\n    that = this\n    splots = new Splots('canvas')\n    this.splots = splots\n    musicVisual.registAnimationFrame(this.loop)\n  },\n  methods: {\n    loop() {\n      if (musicVisual.lmaudio.subject.playing) {\n        let numbers = musicVisual.lmaudio.getAverageFrequency()\n        splots.anim(numbers)\n      }\n    }\n  }\n}\n</script>\n\n<style>\n#canvas {\n  background-color: #000;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/3d/003-light/light.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('canvas',{attrs:{\"id\":\"canvas\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1c1b13fb\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/3d/003-light/light.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1c1b13fb\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./light.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./light.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./light.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1c1b13fb\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./light.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/3d/003-light/light.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}