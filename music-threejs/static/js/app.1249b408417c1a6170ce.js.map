{"version":3,"sources":["webpack:///./src/App.vue?7ddf","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///./src/components/005-music/THREEJS/LMCamera.js","webpack:///./src/components/005-music/THREEJS/LMRender.js","webpack:///./src/components/005-music/THREEJS/LMAudio.js","webpack:///./src/components/005-music/THREEJS/LMThree.js","webpack:///./src/components/005-music/AudioBars.js","webpack:///src/components/005-music/music.vue","webpack:///./src/components/005-music/music.vue?00eb","webpack:///./src/components/005-music/music.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","name","ssrContext","THREE","window","LMCamera","_ref","arguments","length","undefined","_ref$fieldOfView","fieldOfView","_ref$nearPlane","nearPlane","_ref$farPlane","farPlane","_ref$canvasWidth","canvasWidth","_ref$canvasHeight","canvasHeight","classCallCheck_default","aspectRatio","camera","PerspectiveCamera","init","position","x","z","y","lookAt","Vector3","LMRender","canvasFatherId","WebGLRenderer","alpha","antialias","setSize","shadowMapEnabled","document","getElementById","appendChild","domElement","LMAudio","listener","AudioListener","audioLoader","AudioLoader","sound","Audio","analyser","AudioAnalyser","setVolume","playing","URL","that","load","buffer","setBuffer","setLoop","file","process","songname","url","createObjectURL","stop","xhr","perc","loaded","total","Math","floor","data","console","log","err","handleWindowResize","height","innerHeight","width","innerWidth","lmrender","lmcamera","aspect","updateProjectionMatrix","handleMouseMove","event","handleMouseDown","handleMouseUp","handleTouchStart","handleTouchEnd","handleTouchMove","LMThree","scene","lmaudio","initScene","initCamera","initRender","initAudio","controls","TrackballControls","Scene","background","Color","_ref2","addEventListener","defaultColors","pct","color","r","g","b","AudioBars","barNumber","containerClass","barContainer","getElementsByClassName","Bars","i","bar","createElement","classList","add","style","push","colorRange","spectrum","_this","forEach","lower","upper","range","rangePct","pctLower","pctUpper","componentToHex","c","hex","toString","lmthree","audioBars","music_that","music","playState","mounted","barsLength","THREEJS_LMThree","getFrequencyData","_05_music_AudioBars","loop","methods","uploadFile","e","musicFile","target","files","loadSong","update","requestAnimationFrame","loadFile","fileURL","play","confirm","_05_music_music","_vm","staticClass","_v","type","on","change","_s","click","components_005_music_music","music_normalizeComponent","Vue","use","Router","router","routes","path","component","config","productionTip","el","components","App","template"],"mappings":"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","file":"static/js/app.1249b408417c1a6170ce.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-449c7cea\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-449c7cea\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-449c7cea\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div id=\"app\">\r\n    <router-view/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'App'\r\n}\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","let THREE = window.THREE\r\n\r\n// 注: 为了和threejs 中原有camera区分,这里以作者的首字母命名\r\n\r\nclass LMCamera {\r\n  constructor({fieldOfView = 60, nearPlane = 1, farPlane = 2000, canvasWidth = 1024, canvasHeight = 960} = {}) {\r\n    let aspectRatio = canvasWidth / canvasHeight\r\n    this.camera = new THREE.PerspectiveCamera(fieldOfView, aspectRatio, nearPlane, farPlane)\r\n    \r\n    this.init()\r\n  }\r\n\r\n  init() {\r\n    this.camera.position.x = 0\r\n    this.camera.position.z = 1000\r\n    this.camera.position.y = 300\r\n    this.camera.lookAt(new THREE.Vector3(0, 0, 0))\r\n  }\r\n}\r\nexport default LMCamera\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/005-music/THREEJS/LMCamera.js","let THREE = window.THREE\r\n\r\nclass LMRender {\r\n  constructor({canvasHeight, canvasWidth, canvasFatherId}) {\r\n    this.render = new THREE.WebGLRenderer({ alpha: true, antialias: true })\r\n    this.render.setSize(canvasWidth, canvasHeight)\r\n    this.render.shadowMapEnabled = true\r\n    let container = document.getElementById(canvasFatherId)\r\n    container.appendChild(this.render.domElement)\r\n  }\r\n}\r\nexport default LMRender\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/005-music/THREEJS/LMRender.js","let THREE = window.THREE\r\n\r\nclass LMAudio {\r\n  constructor() {\r\n    this.listener = new THREE.AudioListener();\r\n    this.audioLoader = new THREE.AudioLoader(); // 加载器\r\n    this.sound = new THREE.Audio( this.listener ); // 声音\r\n    this.analyser = new THREE.AudioAnalyser( this.sound, 512 ); // 分析器\r\n    this.sound.setVolume(1)\r\n    this.playing = false\r\n  }\r\n    \r\n  loadFile(URL) {\r\n    let that = this\r\n    that.audioLoader.load(URL, (buffer) => {\r\n      that.sound.setBuffer( buffer );\r\n      that.sound.setLoop( true );\r\n      that.sound.setVolume(1);\r\n    });\r\n  }\r\n  // 载入文件\r\n  loadSong (file,process) {\r\n    let that = this\r\n    let songname = file.name;\r\n    let url = window.URL.createObjectURL( file );\r\n    this.audioLoader.load( url, ( buffer ) => {\r\n      that.sound.setBuffer( buffer );\r\n      that.sound.setLoop(true);\r\n      that.sound.setVolume(1);\r\n      if (that.playing) {\r\n        that.sound.stop();\r\n      }\r\n      // that.sound.play();\r\n      // that.playing = true;\r\n    }, ( xhr ) => {\r\n      let perc = (xhr.loaded / xhr.total * 100);\r\n      let loaded = 'Loading ' + songname + ': ' + Math.floor(perc) + '%';\r\n      process.data = loaded\r\n      console.log( loaded )\r\n    }, ( err ) => {\r\n      console.log( err )\r\n    });\r\n  }\r\n}\r\nexport default LMAudio\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/005-music/THREEJS/LMAudio.js","let THREE = window.THREE\r\n\r\nimport LMCamera from './LMCamera'\r\nimport LMRender from './LMRender'\r\nimport LMAudio from './LMAudio'\r\n\r\n\r\nlet that = null\r\n\r\nfunction handleWindowResize () {\r\n  let height = window.innerHeight\r\n  let width = window.innerWidth\r\n  that.lmrender.render.setSize(width, height)\r\n  that.lmcamera.camera.aspect = width / height\r\n  that.lmcamera.camera.updateProjectionMatrix()\r\n}\r\nfunction handleMouseMove (event) {\r\n}\r\nfunction handleMouseDown (event) {\r\n}\r\nfunction handleMouseUp (event) {\r\n}\r\nfunction handleTouchStart (event) {\r\n}\r\nfunction handleTouchEnd (event) {\r\n}\r\n\r\nfunction handleTouchMove (event) {\r\n}\r\n\r\n/**\r\n * threejs 大多数应用都需要的东西,如场景相机等.\r\n */\r\nclass LMThree {\r\n  constructor({canvasHeight, canvasWidth, canvasFatherId}) {\r\n    that = this\r\n    window.THREE = THREE\r\n    // 场景\r\n    this.scene = null\r\n    // 相机\r\n    this.lmcamera = null\r\n    // 渲染器\r\n    this.lmrender = null\r\n    // 声音\r\n    this.lmaudio = null\r\n\r\n    this.initScene()\r\n    this.initCamera()\r\n    this.initRender({canvasHeight, canvasWidth, canvasFatherId})\r\n    this.initAudio()\r\n    this.controls = new THREE.TrackballControls(this.lmcamera.camera)\r\n  }\r\n\r\n  initScene() {\r\n    this.scene = new THREE.Scene()\r\n    this.scene.background = new THREE.Color( 0x0a0026 );\r\n  }\r\n\r\n  initCamera() {\r\n    this.lmcamera = new LMCamera()\r\n  }\r\n\r\n  initRender({canvasHeight, canvasWidth, canvasFatherId}) {\r\n    this.lmrender = new LMRender({canvasHeight, canvasWidth, canvasFatherId})\r\n  }\r\n\r\n  initAudio() {\r\n    this.lmaudio = new LMAudio()\r\n  }\r\n\r\n  initBroserInterface() {\r\n    window.addEventListener('resize', handleWindowResize, false)\r\n    document.addEventListener('mousemove', handleMouseMove, false)\r\n    document.addEventListener('mousedown', handleMouseDown, false)\r\n    document.addEventListener('mouseup', handleMouseUp, false)\r\n    document.addEventListener('touchstart', handleTouchStart, false)\r\n    document.addEventListener('touchend', handleTouchEnd, false)\r\n    document.addEventListener('touchmove', handleTouchMove, false)\r\n  }\r\n}\r\nexport default LMThree\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/005-music/THREEJS/LMThree.js","\r\nlet defaultColors = [\r\n  { pct: 0, color: { r: 0xf4, g: 0xee, b: 0x42 } },\r\n  { pct: 0.5, color: { r: 0x41, g: 0xf4, b: 0x68 } },\r\n  { pct: 1, color: { r: 0x41, g: 0xdf, b: 0xf4 } }\r\n];\r\n\r\nclass AudioBars {\r\n  constructor (barNumber, containerClass) {\r\n    // 创建频谱元素\r\n    let barContainer = document.getElementsByClassName(containerClass)[0]\r\n    this.Bars = [];\r\n    let width = ( ( 1 / barNumber ) * 100 ) + '%';\r\n    for ( let i = 0; i < barNumber; i++ ) {\r\n      let bar = document.createElement('div');\r\n      bar.classList.add('bar');\r\n      bar.style.width = width;\r\n      barContainer.appendChild(bar);\r\n\t\t\tthis.Bars.push(bar);\r\n    }\r\n    // 设置颜色\r\n    this.colorRange = false || defaultColors;\r\n  }\r\n\r\n  update (spectrum) {\r\n    let i = 0;\r\n    spectrum.forEach( ( sound ) => {\r\n\t\t\tlet height = 0.8 * sound;\r\n      this.Bars[i].style.height = height + 'px';\r\n      this.Bars[i].style.background = this.color( sound / 255 );\r\n      i++;\r\n    });\r\n  }\r\n\r\n  //Determine color based on percentage ( CurrentVolume/MaxVolume )\r\n  color( pct ) {\r\n    for (var i = 1; i < this.colorRange.length - 1; i++) {\r\n        if (pct < this.colorRange[i].pct) {\r\n            break;\r\n        }\r\n    }\r\n    let lower = this.colorRange[i - 1];\r\n    let upper = this.colorRange[i];\r\n    let range = upper.pct - lower.pct;\r\n    let rangePct = (pct - lower.pct) / range;\r\n    let pctLower = 1 - rangePct;\r\n    let pctUpper = rangePct;\r\n    let color = {\r\n        r: Math.floor(lower.color.r * pctLower + upper.color.r * pctUpper),\r\n        g: Math.floor(lower.color.g * pctLower + upper.color.g * pctUpper),\r\n        b: Math.floor(lower.color.b * pctLower + upper.color.b * pctUpper)\r\n    };\r\n    return '#' + this.componentToHex(color.r) + this.componentToHex(color.g) + this.componentToHex(color.b);\r\n  }\r\n\r\n  componentToHex(c) {\r\n    var hex = c.toString(16);\r\n    return hex.length == 1 ? \"0\" + hex : hex;\r\n  }\r\n}\r\nexport default AudioBars\n\n\n// WEBPACK FOOTER //\n// ./src/components/005-music/AudioBars.js","<template>\r\n <div class=\"box\">\r\n  <div id=\"canvasFather\"></div>\r\n  <div class=\"bar-container\"></div>\r\n  <input type=\"file\" @change=\"uploadFile\">\r\n  <div class=\"playState\">{{playState}}</div>\r\n  <button @click=\"play\">播放</button>\r\n  <div>{{process.data}}</div>\r\n </div>\r\n</template>\r\n\r\n<script>\r\nimport LMThree from './THREEJS/LMThree'\r\nimport AudioBars from './AudioBars'\r\nimport axios from 'axios'\r\nlet lmthree = null\r\nlet audioBars = null\r\nlet that = null\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      process: {data:0},\r\n      playState: '未播放'\r\n    }\r\n  },\r\n  mounted() {\r\n    that = this\r\n    // threejs\r\n    lmthree = new LMThree({canvasHeight: 500, canvasWidth: 800, canvasFatherId: 'canvasFather'})\r\n    let barsLength = lmthree.lmaudio.analyser.getFrequencyData().length;\r\n    audioBars = new AudioBars(barsLength, 'bar-container',)\r\n    this.loop()\r\n    window.lmthree = lmthree\r\n  },\r\n  methods: {\r\n    // 获取到音乐文件\r\n    uploadFile(e) {\r\n      let musicFile = e.target.files[0]\r\n      lmthree.lmaudio.loadSong(musicFile, this.process)\r\n    },\r\n    // 开始动画\r\n    loop() {\r\n      that.playState = lmthree.lmaudio.playing === false ? '未播放' :'播放中'\r\n      lmthree.controls.update();\r\n      lmthree.lmrender.render.render(lmthree.scene, lmthree.lmcamera.camera);\r\n      if (lmthree.lmaudio.playing) {\r\n        let data = lmthree.lmaudio.analyser.getFrequencyData()\r\n        audioBars.update(data)\r\n      }\r\n      requestAnimationFrame(that.loop);\r\n    },\r\n    loadFile(fileURL) {\r\n      lmthree.lmaudio.loadFile(fileURL)\r\n    },\r\n    play() {\r\n      confirm(\"确定播放?\")\r\n      lmthree.lmaudio.sound.play();\r\n      lmthree.lmaudio.playing = true;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  #drag {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  .box {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  #canvasFather{\r\n    margin: auto;\r\n  }\r\n  canvas {\r\n    border: 1px solid #ccc;\r\n  }\r\n\r\n  .bar-container {\r\n    position: fixed;\r\n    bottom: 436px;\r\n    width: 800px;\r\n    transform: rotate(180deg);\r\n    .bar {\r\n      float: right;\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/005-music/music.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box\"},[_c('div',{attrs:{\"id\":\"canvasFather\"}}),_vm._v(\" \"),_c('div',{staticClass:\"bar-container\"}),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"file\"},on:{\"change\":_vm.uploadFile}}),_vm._v(\" \"),_c('div',{staticClass:\"playState\"},[_vm._v(_vm._s(_vm.playState))]),_vm._v(\" \"),_c('button',{on:{\"click\":_vm.play}},[_vm._v(\"播放\")]),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.process.data))])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-ceced098\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/005-music/music.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-ceced098\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./music.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./music.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./music.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ceced098\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./music.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/005-music/music.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\r\nimport Router from 'vue-router'\r\n// import CatVsBall from '@/components/001-CatVsBall/CatVsBall'\r\n// import LionFan from '@/components/002-Lion/LionFan'\r\n// import BirdLook from '@/components/003-BirdLook/BirdLook'\r\n// import sinCos from '@/components/004-sin_cos/sinCos'\r\nimport music from '@/components/005-music/music'\r\n// import wind from '@/components/006-wind/wind'\r\n// import liquidLights from '@/components/007-LiquidLights/liquidLights'\r\n// import universe from '@/components/008-universe/universe'\r\n\r\nVue.use(Router)\r\n\r\nexport default new Router({\r\n  routes: [\r\n    {\r\n      path: '/',\r\n      component: music\r\n    }\r\n  ]\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\nimport Vue from 'vue'\r\nimport App from './App'\r\nimport router from './router'\r\n\r\nVue.config.productionTip = false\r\n\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n  el: '#app',\r\n  router,\r\n  components: { App },\r\n  template: '<App/>'\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}