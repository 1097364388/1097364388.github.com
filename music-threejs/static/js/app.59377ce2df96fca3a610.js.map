{"version":3,"sources":["webpack:///./src/App.vue?7ddf","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///./src/components/005-music/THREEJS/LMCamera.js","webpack:///./src/components/005-music/THREEJS/LMRender.js","webpack:///./src/components/005-music/THREEJS/LMAudio.js","webpack:///./src/components/005-music/THREEJS/LMThree.js","webpack:///./src/components/005-music/AudioBars.js","webpack:///src/components/005-music/music.vue","webpack:///./src/components/005-music/music.vue?8bcb","webpack:///./src/components/005-music/music.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","name","ssrContext","THREE","window","LMCamera","_ref","arguments","length","undefined","_ref$fieldOfView","fieldOfView","_ref$nearPlane","nearPlane","_ref$farPlane","farPlane","_ref$canvasWidth","canvasWidth","_ref$canvasHeight","canvasHeight","classCallCheck_default","aspectRatio","camera","PerspectiveCamera","init","position","x","z","y","lookAt","Vector3","LMRender","canvasFatherId","WebGLRenderer","alpha","antialias","setSize","shadowMapEnabled","document","getElementById","appendChild","domElement","LMAudio","listener","AudioListener","audioLoader","AudioLoader","sound","Audio","analyser","AudioAnalyser","setVolume","playing","URL","_this","that","load","buffer","setBuffer","setLoop","play","file","songname","url","createObjectURL","stop","xhr","perc","loaded","total","Math","floor","console","log","err","handleWindowResize","height","innerHeight","width","innerWidth","lmrender","lmcamera","aspect","updateProjectionMatrix","handleMouseMove","event","handleMouseDown","handleMouseUp","handleTouchStart","handleTouchEnd","handleTouchMove","LMThree","scene","lmaudio","initScene","initCamera","initRender","initAudio","controls","TrackballControls","Scene","background","Color","_ref2","addEventListener","defaultColors","pct","color","r","g","b","AudioBars","barNumber","containerClass","barContainer","getElementsByClassName","Bars","i","bar","createElement","classList","add","style","push","colorRange","spectrum","forEach","lower","upper","range","rangePct","pctLower","pctUpper","componentToHex","c","hex","toString","lmthree","audioBars","music_that","music","mounted","barsLength","THREEJS_LMThree","getFrequencyData","_05_music_AudioBars","loop","loadFile","methods","uploadFile","e","musicFile","target","files","loadSong","error","update","data","requestAnimationFrame","fileURL","_05_music_music","staticClass","_v","type","on","change","components_005_music_music","music_normalizeComponent","Vue","use","Router","router","routes","path","component","config","productionTip","el","components","App","template"],"mappings":"qHAGeA,GADEC,OAFjB,WAA0B,IAAaC,EAAbC,KAAaC,eAA0BC,EAAvCF,KAAuCG,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,OAAiBE,OAAOC,GAAA,SAAYH,EAAA,oBAE5GI,oBCCjB,IAuBeC,EAvBUC,EAAQ,OAcjCC,ECTAC,KAAA,ODWEb,GATF,EAVA,SAAAc,GACEH,EAAQ,SAaV,KAEA,MAUgC,8DE1B5BI,EAAQC,OAAOD,MAmBJE,aAdb,SAAAA,IAA6G,IAAAC,EAAAC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,MAAAG,EAAAJ,EAAhGK,mBAAgGF,IAAAC,EAAlF,GAAkFA,EAAAE,EAAAN,EAA9EO,iBAA8EJ,IAAAG,EAAlE,EAAkEA,EAAAE,EAAAR,EAA/DS,gBAA+DN,IAAAK,EAApD,IAAoDA,EAAAE,EAAAV,EAA9CW,mBAA8CR,IAAAO,EAAhC,KAAgCA,EAAAE,EAAAZ,EAA1Ba,oBAA0BV,IAAAS,EAAX,IAAWA,EAAAE,IAAA7B,KAAAc,GAC3G,IAAIgB,EAAcJ,EAAcE,EAChC5B,KAAK+B,OAAS,IAAInB,EAAMoB,kBAAkBZ,EAAaU,EAAaR,EAAWE,GAE/ExB,KAAKiC,kDAILjC,KAAK+B,OAAOG,SAASC,EAAI,EACzBnC,KAAK+B,OAAOG,SAASE,EAAI,IACzBpC,KAAK+B,OAAOG,SAASG,EAAI,IACzBrC,KAAK+B,OAAOO,OAAO,IAAI1B,EAAM2B,QAAQ,EAAG,EAAG,aChB3C3B,EAAQC,OAAOD,MAWJ4B,EARb,SAAAA,EAAAzB,GAAyD,IAA5Ca,EAA4Cb,EAA5Ca,aAAcF,EAA8BX,EAA9BW,YAAae,EAAiB1B,EAAjB0B,eAAiBZ,IAAA7B,KAAAwC,GACvDxC,KAAKF,OAAS,IAAIc,EAAM8B,eAAgBC,OAAO,EAAMC,WAAW,IAChE5C,KAAKF,OAAO+C,QAAQnB,EAAaE,GACjC5B,KAAKF,OAAOgD,kBAAmB,EACfC,SAASC,eAAeP,GAC9BQ,YAAYjD,KAAKF,OAAOoD,aCRlCtC,EAAQC,OAAOD,MA8CJuC,aA3Cb,SAAAA,IAActB,IAAA7B,KAAAmD,GACZnD,KAAKoD,SAAW,IAAIxC,EAAMyC,cAC1BrD,KAAKsD,YAAc,IAAI1C,EAAM2C,YAC7BvD,KAAKwD,MAAQ,IAAI5C,EAAM6C,MAAOzD,KAAKoD,UACnCpD,KAAK0D,SAAW,IAAI9C,EAAM+C,cAAe3D,KAAKwD,MAAO,KACrDxD,KAAKwD,MAAMI,UAAU,GACrB5D,KAAK6D,SAAU,+CAGRC,GAAK,IAAAC,EAAA/D,KACRgE,EAAOhE,KACXgE,EAAKV,YAAYW,KAAKH,EAAK,SAACI,GAC1BF,EAAKR,MAAMW,UAAWD,GACtBF,EAAKR,MAAMY,SAAS,GACpBJ,EAAKR,MAAMI,UAAU,GACrBI,EAAKR,MAAMa,OACXN,EAAKF,SAAU,qCAITS,GACR,IAAIN,EAAOhE,KACPuE,EAAWD,EAAK5D,KAEhB8D,EAAM3D,OAAOiD,IAAIW,gBAAiBH,GACtCtE,KAAKsD,YAAYW,KAAMO,EAAK,SAAEN,GAC5BF,EAAKR,MAAMW,UAAWD,GACtBF,EAAKR,MAAMY,SAAQ,GACnBJ,EAAKR,MAAMI,UAAU,GACjBI,EAAKH,SACPG,EAAKR,MAAMkB,OAEbV,EAAKR,MAAMa,OACXL,EAAKH,SAAU,GACd,SAAEc,GACH,IAAIC,EAAQD,EAAIE,OAASF,EAAIG,MAAQ,IACjCD,EAAS,WAAaN,EAAW,KAAOQ,KAAKC,MAAMJ,GAAQ,IAC/DK,QAAQC,IAAKL,IACZ,SAAEM,GACHF,QAAQC,IAAKC,cC1CfvE,EAAQC,OAAOD,MAOfoD,EAAO,KAEX,SAASoB,IACP,IAAIC,EAASxE,OAAOyE,YAChBC,EAAQ1E,OAAO2E,WACnBxB,EAAKyB,SAAS3F,OAAO+C,QAAQ0C,EAAOF,GACpCrB,EAAK0B,SAAS3D,OAAO4D,OAASJ,EAAQF,EACtCrB,EAAK0B,SAAS3D,OAAO6D,yBAEvB,SAASC,EAAiBC,IAE1B,SAASC,EAAiBD,IAE1B,SAASE,EAAeF,IAExB,SAASG,EAAkBH,IAE3B,SAASI,EAAgBJ,IAGzB,SAASK,EAAiBL,QAqDXM,aA9Cb,SAAAA,EAAArF,GAAyD,IAA5Ca,EAA4Cb,EAA5Ca,aAAcF,EAA8BX,EAA9BW,YAAae,EAAiB1B,EAAjB0B,eAAiBZ,IAAA7B,KAAAoG,GACvDpC,EAAOhE,KACPa,OAAOD,MAAQA,EAEfZ,KAAKqG,MAAQ,KAEbrG,KAAK0F,SAAW,KAEhB1F,KAAKyF,SAAW,KAEhBzF,KAAKsG,QAAU,KAEftG,KAAKuG,YACLvG,KAAKwG,aACLxG,KAAKyG,YAAY7E,eAAcF,cAAae,mBAC5CzC,KAAK0G,YACL1G,KAAK2G,SAAW,IAAI/F,EAAMgG,kBAAkB5G,KAAK0F,SAAS3D,wDAI1D/B,KAAKqG,MAAQ,IAAIzF,EAAMiG,MACvB7G,KAAKqG,MAAMS,WAAa,IAAIlG,EAAMmG,MAAO,6CAIzC/G,KAAK0F,SAAW,IAAI5E,wCAGkC,IAA5Cc,EAA4CoF,EAA5CpF,aAAcF,EAA8BsF,EAA9BtF,YAAae,EAAiBuE,EAAjBvE,eACrCzC,KAAKyF,SAAW,IAAIjD,GAAUZ,eAAcF,cAAae,uDAIzDzC,KAAKsG,QAAU,IAAInD,gDAInBtC,OAAOoG,iBAAiB,SAAU7B,GAAoB,GACtDrC,SAASkE,iBAAiB,YAAapB,GAAiB,GACxD9C,SAASkE,iBAAiB,YAAalB,GAAiB,GACxDhD,SAASkE,iBAAiB,UAAWjB,GAAe,GACpDjD,SAASkE,iBAAiB,aAAchB,GAAkB,GAC1DlD,SAASkE,iBAAiB,WAAYf,GAAgB,GACtDnD,SAASkE,iBAAiB,YAAad,GAAiB,YC5ExDe,IACAC,IAAK,EAAGC,OAASC,EAAG,IAAMC,EAAG,IAAMC,EAAG,MACtCJ,IAAK,GAAKC,OAASC,EAAG,GAAMC,EAAG,IAAMC,EAAG,OACxCJ,IAAK,EAAGC,OAASC,EAAG,GAAMC,EAAG,IAAMC,EAAG,OAwD3BC,aApDb,SAAAA,EAAaC,EAAWC,GAAgB7F,IAAA7B,KAAAwH,GAEtC,IAAIG,EAAe5E,SAAS6E,uBAAuBF,GAAgB,GACnE1H,KAAK6H,QAEL,IADA,IAAItC,EAAY,EAAIkC,EAAc,IAAQ,IAChCK,EAAI,EAAGA,EAAIL,EAAWK,IAAM,CACpC,IAAIC,EAAMhF,SAASiF,cAAc,OACjCD,EAAIE,UAAUC,IAAI,OAClBH,EAAII,MAAM5C,MAAQA,EAClBoC,EAAa1E,YAAY8E,GAC5B/H,KAAK6H,KAAKO,KAAKL,GAGd/H,KAAKqI,WAAsBnB,6CAGrBoB,GAAU,IAAAvE,EAAA/D,KACZ8H,EAAI,EACRQ,EAASC,QAAS,SAAE/E,GACrB,IAAI6B,EAAS,GAAM7B,EAChBO,EAAK8D,KAAKC,GAAGK,MAAM9C,OAASA,EAAS,KACrCtB,EAAK8D,KAAKC,GAAGK,MAAMrB,WAAa/C,EAAKqD,MAAO5D,EAAQ,KACpDsE,oCAKGX,GACL,IAAK,IAAIW,EAAI,EAAGA,EAAI9H,KAAKqI,WAAWpH,OAAS,KACrCkG,EAAMnH,KAAKqI,WAAWP,GAAGX,KADeW,KAKhD,IAAIU,EAAQxI,KAAKqI,WAAWP,EAAI,GAC5BW,EAAQzI,KAAKqI,WAAWP,GACxBY,EAAQD,EAAMtB,IAAMqB,EAAMrB,IAC1BwB,GAAYxB,EAAMqB,EAAMrB,KAAOuB,EAC/BE,EAAW,EAAID,EACfE,EAAWF,EACXvB,GACAC,EAAGtC,KAAKC,MAAMwD,EAAMpB,MAAMC,EAAIuB,EAAWH,EAAMrB,MAAMC,EAAIwB,GACzDvB,EAAGvC,KAAKC,MAAMwD,EAAMpB,MAAME,EAAIsB,EAAWH,EAAMrB,MAAME,EAAIuB,GACzDtB,EAAGxC,KAAKC,MAAMwD,EAAMpB,MAAMG,EAAIqB,EAAWH,EAAMrB,MAAMG,EAAIsB,IAE7D,MAAO,IAAM7I,KAAK8I,eAAe1B,EAAMC,GAAKrH,KAAK8I,eAAe1B,EAAME,GAAKtH,KAAK8I,eAAe1B,EAAMG,0CAGxFwB,GACb,IAAIC,EAAMD,EAAEE,SAAS,IACrB,OAAqB,GAAdD,EAAI/H,OAAc,IAAM+H,EAAMA,WC7CzCE,aAAA,MACAC,EAAA,KACAC,EAAA,KAEAC,GACAC,QADA,WAEIF,EAAJpJ,KAGA,IAAAuJ,GADAL,EAAA,IAAAM,GAAA5H,aAAA,IAAAF,YAAA,IAAAe,eAAA,kBACA6D,QAAA5C,SAAA+F,mBAAAxI,OACAkI,EAAA,IAAAO,EAAAH,EAAA,iBACAvJ,KAAA2J,OACIP,EAAJQ,SAAA,0DAEAC,SAEAC,WAFA,SAEAC,GACA,IAAAC,EAAAD,EAAAE,OAAAC,MAAA,GACAhB,EAAA5C,QAAA6D,SAAAH,GACA/E,QAAAmF,MAAAL,EAAAE,OAAAC,MAAA,KAGAP,KARA,WAWA,GAFAT,EAAAvC,SAAA0D,SACAnB,EAAAzD,SAAA3F,cAAAoJ,EAAA7C,MAAA6C,EAAAxD,SAAA3D,QACAmH,EAAA5C,QAAAzC,QAAA,CACA,IAAAyG,EAAApB,EAAA5C,QAAA5C,SAAA+F,mBACAN,EAAAkB,OAAAC,GAEAC,sBAAAnB,EAAAO,OAEAC,SAjBA,SAiBAY,GACAtB,EAAA5C,QAAAsD,SAAAY,MCzCeC,GADE3K,OAFP,WAAgB,IAAaC,EAAbC,KAAaC,eAA0BC,EAAvCF,KAAuCG,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,OAAiBwK,YAAA,QAAkBxK,EAAA,OAAYE,OAAOC,GAAA,kBAArHL,KAA0I2K,GAAA,KAAAzK,EAAA,OAAwBwK,YAAA,kBAAlK1K,KAA8L2K,GAAA,KAAAzK,EAAA,SAA0BE,OAAOwK,KAAA,QAAcC,IAAKC,OAAlP9K,KAAkP8J,iBAE5OxJ,oBCChC,IAuBeyK,EAvBUvK,EAAQ,OAcjBwK,CACd3B,EACAoB,GAT6B,EAV/B,SAAoB9J,GAClBH,EAAQ,SAaS,KAEU,MAUG,QClBhCyK,IAAIC,IAAIC,KAEO,IAAAC,EAAA,IAAID,KACjBE,SAEIC,KAAM,IACNC,UAAWlC,MCRjB4B,IAAIO,OAAOC,eAAgB,EAG3B,IAAIR,KACFS,GAAI,OACJN,SACAO,YAAcC,OACdC,SAAU","file":"static/js/app.59377ce2df96fca3a610.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-449c7cea\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-449c7cea\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-449c7cea\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div id=\"app\">\r\n    <router-view/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'App'\r\n}\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","let THREE = window.THREE\r\n\r\n// 注: 为了和threejs 中原有camera区分,这里以作者的首字母命名\r\n\r\nclass LMCamera {\r\n  constructor({fieldOfView = 60, nearPlane = 1, farPlane = 2000, canvasWidth = 1024, canvasHeight = 960} = {}) {\r\n    let aspectRatio = canvasWidth / canvasHeight\r\n    this.camera = new THREE.PerspectiveCamera(fieldOfView, aspectRatio, nearPlane, farPlane)\r\n    \r\n    this.init()\r\n  }\r\n\r\n  init() {\r\n    this.camera.position.x = 0\r\n    this.camera.position.z = 1000\r\n    this.camera.position.y = 300\r\n    this.camera.lookAt(new THREE.Vector3(0, 0, 0))\r\n  }\r\n}\r\nexport default LMCamera\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/005-music/THREEJS/LMCamera.js","let THREE = window.THREE\r\n\r\nclass LMRender {\r\n  constructor({canvasHeight, canvasWidth, canvasFatherId}) {\r\n    this.render = new THREE.WebGLRenderer({ alpha: true, antialias: true })\r\n    this.render.setSize(canvasWidth, canvasHeight)\r\n    this.render.shadowMapEnabled = true\r\n    let container = document.getElementById(canvasFatherId)\r\n    container.appendChild(this.render.domElement)\r\n  }\r\n}\r\nexport default LMRender\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/005-music/THREEJS/LMRender.js","let THREE = window.THREE\r\n\r\nclass LMAudio {\r\n  constructor() {\r\n    this.listener = new THREE.AudioListener();\r\n    this.audioLoader = new THREE.AudioLoader(); // 加载器\r\n    this.sound = new THREE.Audio( this.listener ); // 声音\r\n    this.analyser = new THREE.AudioAnalyser( this.sound, 512 ); // 分析器\r\n    this.sound.setVolume(1)\r\n    this.playing = false\r\n  }\r\n    \r\n  loadFile(URL) {\r\n    let that = this\r\n    that.audioLoader.load(URL, (buffer) => {\r\n      that.sound.setBuffer( buffer );\r\n      that.sound.setLoop( true );\r\n      that.sound.setVolume(1);\r\n      that.sound.play();\r\n      this.playing = true\r\n    });\r\n  }\r\n  // 载入文件\r\n  loadSong (file) {\r\n    let that = this\r\n    let songname = file.name;\r\n    debugger\r\n    let url = window.URL.createObjectURL( file );\r\n    this.audioLoader.load( url, ( buffer ) => {\r\n      that.sound.setBuffer( buffer );\r\n      that.sound.setLoop(true);\r\n      that.sound.setVolume(1);\r\n      if (that.playing) {\r\n        that.sound.stop();\r\n      }\r\n      that.sound.play();\r\n      that.playing = true;\r\n    }, ( xhr ) => {\r\n      let perc = (xhr.loaded / xhr.total * 100);\r\n      let loaded = 'Loading ' + songname + ': ' + Math.floor(perc) + '%';\r\n      console.log( loaded )\r\n    }, ( err ) => {\r\n      console.log( err )\r\n    });\r\n  }\r\n}\r\nexport default LMAudio\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/005-music/THREEJS/LMAudio.js","let THREE = window.THREE\r\n\r\nimport LMCamera from './LMCamera'\r\nimport LMRender from './LMRender'\r\nimport LMAudio from './LMAudio'\r\n\r\n\r\nlet that = null\r\n\r\nfunction handleWindowResize () {\r\n  let height = window.innerHeight\r\n  let width = window.innerWidth\r\n  that.lmrender.render.setSize(width, height)\r\n  that.lmcamera.camera.aspect = width / height\r\n  that.lmcamera.camera.updateProjectionMatrix()\r\n}\r\nfunction handleMouseMove (event) {\r\n}\r\nfunction handleMouseDown (event) {\r\n}\r\nfunction handleMouseUp (event) {\r\n}\r\nfunction handleTouchStart (event) {\r\n}\r\nfunction handleTouchEnd (event) {\r\n}\r\n\r\nfunction handleTouchMove (event) {\r\n}\r\n\r\n/**\r\n * threejs 大多数应用都需要的东西,如场景相机等.\r\n */\r\nclass LMThree {\r\n  constructor({canvasHeight, canvasWidth, canvasFatherId}) {\r\n    that = this\r\n    window.THREE = THREE\r\n    // 场景\r\n    this.scene = null\r\n    // 相机\r\n    this.lmcamera = null\r\n    // 渲染器\r\n    this.lmrender = null\r\n    // 声音\r\n    this.lmaudio = null\r\n\r\n    this.initScene()\r\n    this.initCamera()\r\n    this.initRender({canvasHeight, canvasWidth, canvasFatherId})\r\n    this.initAudio()\r\n    this.controls = new THREE.TrackballControls(this.lmcamera.camera)\r\n  }\r\n\r\n  initScene() {\r\n    this.scene = new THREE.Scene()\r\n    this.scene.background = new THREE.Color( 0x0a0026 );\r\n  }\r\n\r\n  initCamera() {\r\n    this.lmcamera = new LMCamera()\r\n  }\r\n\r\n  initRender({canvasHeight, canvasWidth, canvasFatherId}) {\r\n    this.lmrender = new LMRender({canvasHeight, canvasWidth, canvasFatherId})\r\n  }\r\n\r\n  initAudio() {\r\n    this.lmaudio = new LMAudio()\r\n  }\r\n\r\n  initBroserInterface() {\r\n    window.addEventListener('resize', handleWindowResize, false)\r\n    document.addEventListener('mousemove', handleMouseMove, false)\r\n    document.addEventListener('mousedown', handleMouseDown, false)\r\n    document.addEventListener('mouseup', handleMouseUp, false)\r\n    document.addEventListener('touchstart', handleTouchStart, false)\r\n    document.addEventListener('touchend', handleTouchEnd, false)\r\n    document.addEventListener('touchmove', handleTouchMove, false)\r\n  }\r\n}\r\nexport default LMThree\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/005-music/THREEJS/LMThree.js","\r\nlet defaultColors = [\r\n  { pct: 0, color: { r: 0xf4, g: 0xee, b: 0x42 } },\r\n  { pct: 0.5, color: { r: 0x41, g: 0xf4, b: 0x68 } },\r\n  { pct: 1, color: { r: 0x41, g: 0xdf, b: 0xf4 } }\r\n];\r\n\r\nclass AudioBars {\r\n  constructor (barNumber, containerClass) {\r\n    // 创建频谱元素\r\n    let barContainer = document.getElementsByClassName(containerClass)[0]\r\n    this.Bars = [];\r\n    let width = ( ( 1 / barNumber ) * 100 ) + '%';\r\n    for ( let i = 0; i < barNumber; i++ ) {\r\n      let bar = document.createElement('div');\r\n      bar.classList.add('bar');\r\n      bar.style.width = width;\r\n      barContainer.appendChild(bar);\r\n\t\t\tthis.Bars.push(bar);\r\n    }\r\n    // 设置颜色\r\n    this.colorRange = false || defaultColors;\r\n  }\r\n\r\n  update (spectrum) {\r\n    let i = 0;\r\n    spectrum.forEach( ( sound ) => {\r\n\t\t\tlet height = 0.8 * sound;\r\n      this.Bars[i].style.height = height + 'px';\r\n      this.Bars[i].style.background = this.color( sound / 255 );\r\n      i++;\r\n    });\r\n  }\r\n\r\n  //Determine color based on percentage ( CurrentVolume/MaxVolume )\r\n  color( pct ) {\r\n    for (var i = 1; i < this.colorRange.length - 1; i++) {\r\n        if (pct < this.colorRange[i].pct) {\r\n            break;\r\n        }\r\n    }\r\n    let lower = this.colorRange[i - 1];\r\n    let upper = this.colorRange[i];\r\n    let range = upper.pct - lower.pct;\r\n    let rangePct = (pct - lower.pct) / range;\r\n    let pctLower = 1 - rangePct;\r\n    let pctUpper = rangePct;\r\n    let color = {\r\n        r: Math.floor(lower.color.r * pctLower + upper.color.r * pctUpper),\r\n        g: Math.floor(lower.color.g * pctLower + upper.color.g * pctUpper),\r\n        b: Math.floor(lower.color.b * pctLower + upper.color.b * pctUpper)\r\n    };\r\n    return '#' + this.componentToHex(color.r) + this.componentToHex(color.g) + this.componentToHex(color.b);\r\n  }\r\n\r\n  componentToHex(c) {\r\n    var hex = c.toString(16);\r\n    return hex.length == 1 ? \"0\" + hex : hex;\r\n  }\r\n}\r\nexport default AudioBars\n\n\n// WEBPACK FOOTER //\n// ./src/components/005-music/AudioBars.js","<template>\r\n <div class=\"box\">\r\n  <div id=\"canvasFather\"></div>\r\n  <div class=\"bar-container\"></div>\r\n  <input type=\"file\" @change=\"uploadFile\">\r\n </div>\r\n</template>\r\n\r\n<script>\r\nimport LMThree from './THREEJS/LMThree'\r\nimport AudioBars from './AudioBars'\r\nimport axios from 'axios'\r\nlet lmthree = null\r\nlet audioBars = null\r\nlet that = null\r\n\r\nexport default {\r\n  mounted() {\r\n    that = this\r\n    // threejs\r\n    lmthree = new LMThree({canvasHeight: 500, canvasWidth: 800, canvasFatherId: 'canvasFather'})\r\n    let barsLength = lmthree.lmaudio.analyser.getFrequencyData().length;\r\n    audioBars = new AudioBars(barsLength, 'bar-container',)\r\n    this.loop()\r\n    that.loadFile('https://1097364388.github.io/static/music/tianfen.mp3')\r\n  },\r\n  methods: {\r\n    // 获取到音乐文件\r\n    uploadFile(e) {\r\n      let musicFile = e.target.files[0]\r\n      lmthree.lmaudio.loadSong(musicFile)\r\n      console.error(e.target.files[0])\r\n    },\r\n    // 开始动画\r\n    loop() {\r\n      lmthree.controls.update();\r\n      lmthree.lmrender.render.render(lmthree.scene, lmthree.lmcamera.camera);\r\n      if (lmthree.lmaudio.playing) {\r\n        let data = lmthree.lmaudio.analyser.getFrequencyData()\r\n        audioBars.update(data)\r\n      }\r\n      requestAnimationFrame(that.loop);\r\n    },\r\n    loadFile(fileURL) {\r\n      lmthree.lmaudio.loadFile(fileURL)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  #drag {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  .box {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  #canvasFather{\r\n    margin: auto;\r\n  }\r\n  canvas {\r\n    border: 1px solid #ccc;\r\n  }\r\n\r\n  .bar-container {\r\n    position: fixed;\r\n    bottom: 436px;\r\n    width: 800px;\r\n    transform: rotate(180deg);\r\n    .bar {\r\n      float: right;\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/005-music/music.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box\"},[_c('div',{attrs:{\"id\":\"canvasFather\"}}),_vm._v(\" \"),_c('div',{staticClass:\"bar-container\"}),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"file\"},on:{\"change\":_vm.uploadFile}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-46a140e0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/components/005-music/music.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-46a140e0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./music.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./music.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./music.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-46a140e0\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./music.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/005-music/music.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\r\nimport Router from 'vue-router'\r\n// import CatVsBall from '@/components/CatVsBall/CatVsBall'\r\n// import LionFan from '@/components/Lion/LionFan'\r\n// import BirdLook from '@/components/BirdLook/BirdLook'\r\n// import sinCos from '@/components/004-sin_cos/sinCos'\r\nimport music from '@/components/005-music/music'\r\n\r\nVue.use(Router)\r\n\r\nexport default new Router({\r\n  routes: [\r\n    {\r\n      path: '/',\r\n      component: music\r\n    }\r\n  ]\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\r\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\r\nimport Vue from 'vue'\r\nimport App from './App'\r\nimport router from './router'\r\n\r\nVue.config.productionTip = false\r\n\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n  el: '#app',\r\n  router,\r\n  components: { App },\r\n  template: '<App/>'\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}